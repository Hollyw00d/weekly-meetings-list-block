(()=>{"use strict";const e=e=>e.desc?e=>-1*e:e=>e,t=(e,t)=>(t.nullable&&(e=e||""),t.lowercase&&(e=e.toLowerCase()),e),s=(s={desc:!1,nullable:!1,lowercase:!1})=>{const l=e(s);return(e,r)=>l(t(e,s).localeCompare(t(r,s)))};function l(e,t){return"function"==typeof e?(s,l)=>{const r=e(s),i=e(l);return t(r,i)}:(s,l)=>{const r=s[e],i=l[e];return t(r,i)}}const r="wp-block-create-block-meetings-table-block",i={startTimeClassName:"start-time-filter"},o=new class{filterEvents(e){const t=document.getElementsByClassName(e);0!==t.length&&[...t].forEach((t=>{const s=t.getElementsByTagName("table"),l=t.getElementsByTagName("tbody"),r=t.getElementsByTagName("tbody")[0].getElementsByTagName("tr"),o=t.getElementsByClassName(`${e}__filters__wrapper`),{startTimeClassName:a}=i;let n=this.getSelectTagFilters(t);this.resetFilters(t,n,l),this.selectTagFilterEvents(n,e,a,s,l,r,o)}))}selectTagFilterEvents(e,t,s,l,r,i,o){[...e].forEach((e=>{e.addEventListener("change",(e=>{const a=e.target,n=a.className.split(" ")[0].trim(),c=`.${t}`,d=a.closest(c);this.filterEventsLoop(a,n,t,d,s,l,r,i,o)}))}))}filterEventsLoop(e,t,s,l,r,i,o,a,n){let c=!1;if(t===r){c=!0,0===i[0].getElementsByClassName("copied-data").length&&this.setupFilterHandler(i,o,a);let t=this.getSelectTagFilters(l);return this.showHideFilter(s,l,o,n,e,c),void this.filterNotification(e,t)}{c=!1,0===i[0].getElementsByClassName("copied-data").length&&this.setupFilterHandler(i,o,a);let t=this.getSelectTagFilters(l);return this.showHideFilter(s,l,o,n,e,c),void this.filterNotification(e,t)}}setupFilterHandler(e,t,s){var l;t[0].classList.contains("hide")||t[0].classList.add("hide");const r=null!==(l=e[0].getElementsByClassName("copied-data"))&&void 0!==l?l:null;r.length>0&&r.remove();const i=document.createElement("tbody");i.classList.add("copied-data"),i.classList.contains("hide")&&i.classList.remove("hide"),this.isElemEmpty(i)&&([...s].forEach(((e,t)=>{const s=t+1,l=e.cloneNode(!0);l.setAttribute("data-original-order",s),i.appendChild(l)})),e[0].appendChild(i))}showHideFilter(e,t,s,l,r,i){const o=t.getElementsByClassName("copied-data"),a=[...o[0].getElementsByTagName("tr")];let n=this.getSelectTagFilters(t),{filtersArr:c}=this.filtersArr(n),{optionsTagValues:d}=this.filtersArr(n);if(i)return 1===c.length&&""===c[0]?void this.filterResetHandler(o,s):void this.sortTimeFilter(e,r,l);if(1!==c.length||""!==c[0]){a.forEach((e=>{let t=JSON.stringify(d),s=e.getAttribute("data-filter-day"),l=e.getAttribute("data-filter-city"),r=null;switch(!0){case-1!==t.indexOf("location~"):r=e.getAttribute("data-location-group-type");break;case-1!==t.indexOf("access~"):r=e.getAttribute("data-access-group-type");break;case-1!==t.indexOf("gender~"):r=e.getAttribute("data-gender-group-type");break;default:r=e.getAttribute("data-additional-group-type")}let i=[],o=[];[s,l,r].forEach(((e,t)=>{""!==d[t]&&(i.push(e),o.push(d[t]))})),JSON.stringify(i)===JSON.stringify(o)?e.classList.remove("hide"):e.classList.add("hide")}));const e=t.querySelector("tbody.copied-data");this.alternateRowColor(e)}else this.filterResetHandler(o,s)}sortTimeFilter(t,r){var i;const o=`.${t}`,a=r.closest(o),n=null!==(i=a.querySelector("tbody.copied-data"))&&void 0!==i?i:null;if(!n)return;const c=n.querySelectorAll("tr"),d=r.value,g=Array.from(c);if("asc~"===d){let e=g.sort(l((e=>e.getAttribute("data-start-time")),s()));this.emptyElem(n),n.append(...e)}else if("desc~"===d){let e=g.sort(l((e=>e.getAttribute("data-start-time")),s({desc:!0})));this.emptyElem(n),n.append(...e)}else{let t=g.sort(l((e=>Number(e.getAttribute("data-original-order"))),((t={desc:!1,nullable:!1})=>{const s=e(t);return(e,l)=>t.nullable?s((e||0)-(l||0)||0):s(e-l||0)})()));this.emptyElem(n),n.append(...t)}const h=a.querySelector("tbody.copied-data");this.alternateRowColor(h)}filtersArr(e){let t=[],s=[];[...e].forEach((e=>{let l=e.options[e.selectedIndex].value,r=e.options[e.selectedIndex].text;t.push(l),s.push(r)}));const l=[...new Set(t)],r=[...new Set(s)];return s=r.filter(Boolean),{filtersArr:l,optionsTagValues:t,optionsTagText:s}}filterResetHandler(e,t){e[0].remove(),t[0].classList.remove("hide")}alternateRowColor(e){e.querySelectorAll("tr:not(.hide)").forEach(((e,t)=>{e.classList.remove("bg-light-gray"),e.classList.remove("bg-white"),t%2!=0?e.classList.add("bg-white"):e.classList.add("bg-light-gray")}))}getSelectTagFilters(e){return e.getElementsByTagName("select")}filterNotification(e,t){var s;const l=e.closest(`.${r}`),i=l.querySelectorAll("tbody.original-data tr"),o=l.querySelectorAll("tbody.copied-data tr:not(.hide)"),a=null!==(s=l.querySelector(".notification"))&&void 0!==s?s:null,{filtersArr:n}=this.filtersArr(t),{optionsTagValues:c}=this.filtersArr(t),{optionsTagText:d}=this.filtersArr(t),g=[];let h=null;switch(!0){case 1===n.length&&""===n[0]:return void(a&&(a.textContent=`Showing All ${i.length} Meeting(s)`));case 0===o.length:return h=this.selectedFilterArr(c,d,g),void(a&&(a.innerHTML=`Showing ${o.length} Meeting(s) when filter(s) selected:<br />${h}`));default:h=this.selectedFilterArr(c,d,g),a&&(a.innerHTML=`Showing ${o.length} Meeting(s) when filter(s) selected:<br />${h}`)}}resetFilters(e,t,s){e.getElementsByClassName("wp-block-create-block-meetings-table-block_reset-btn")[0].addEventListener("click",(l=>{var i,o;const a=l.target.closest(`.${r}`),n=a.querySelectorAll("tbody.original-data tr"),c=null!==(i=a.querySelector("table tbody.copied-data"))&&void 0!==i?i:null;if(!c)return;[...t].forEach((e=>{e.value=""}));const d=null!==(o=e.querySelector(".notification"))&&void 0!==o?o:null;d&&(d.textContent=`Showing All ${n.length} Meeting(s)`),c.remove(),s[0].classList.remove("hide")}))}isElemEmpty(e){return 0===e.childNodes.length}emptyElem(e){e.textContent=""}selectedFilterArr(e,t,s){return e.map(((e,l)=>{""!==e&&s.push(t[l])})),s.join(", ")}removeDupesFromArr(e){return[...new Set(e)]}ifHTMLCollectionOrNodeList(e){switch(!0){case HTMLCollection.prototype.isPrototypeOf(e):return console.log("Is HTMLCollection"),void console.log(e);case NodeList.prototype.isPrototypeOf(e):return console.log("Is NodeList"),void console.log(e);default:console.log("NOT HTMLCollection or NodeList!!!")}}onPrintEvents(e,t,s){e.forEach((e=>{e.addEventListener("click",(e=>{const l=document.querySelectorAll("*");this.hideAllElemsOnPrint(l);const r=e.target,i=r.closest("table");r.classList.remove("wp-block-create-block-meetings-table-block_show-print"),r.classList.add("wp-block-create-block-meetings-table-block_hide-print"),this.updateParentElemClasses(r,t,s);const o=this.getAllDescendants(i);o&&(o.forEach((e=>{e.classList&&(e.classList.remove("wp-block-create-block-meetings-table-block_hide-print"),e.classList.add("wp-block-create-block-meetings-table-block_show-print"))})),window.print())}))}))}hideAllElemsOnPrint(e){e.forEach((e=>{"HTML"!==e.nodeName.toUpperCase()&&(e.classList.remove("wp-block-create-block-meetings-table-block_show-print"),e.classList.add("wp-block-create-block-meetings-table-block_hide-print"))}))}updateParentElemClasses(e,t,s){let l=e.parentNode;l.classList.add(t),l.classList.remove(s);let r=l.nodeName.toUpperCase();for(;r&&"BODY"!==r&&r;)l=l.parentNode,l.classList.add(t),l.classList.remove(s),r=l?.nodeName.toUpperCase()}exitPrintEvents(e,t){window.matchMedia("print").addListener((function(s){s.matches||[...Array.from(document.getElementsByClassName(e)),...Array.from(document.getElementsByClassName(t))].forEach((s=>{s.classList.remove(e),s.classList.remove(t)}))}))}getAllDescendants(e){if(!e)return;let t=[];return function e(s){for(var l=0;l<s.childNodes.length;l++){let r=s.childNodes[l];e(r),t.push(r)}}(e),t}};o.filterEvents(`${r}`);const a=document.querySelectorAll(`.${r} button.print`);o.onPrintEvents(a,"show-print","wp-block-create-block-meetings-table-block_hide-print"),o.exitPrintEvents("show-print","wp-block-create-block-meetings-table-block_hide-print")})();