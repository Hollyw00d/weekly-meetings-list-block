(()=>{"use strict";const e=e=>e.desc?e=>-1*e:e=>e,t=(e,t)=>(t.nullable&&(e=e||""),t.lowercase&&(e=e.toLowerCase()),e),l=(l={desc:!1,nullable:!1,lowercase:!1})=>{const r=e(l);return(e,s)=>r(t(e,l).localeCompare(t(s,l)))};function r(e,t){return"function"==typeof e?(l,r)=>{const s=e(l),i=e(r);return t(s,i)}:(l,r)=>{const s=l[e],i=r[e];return t(s,i)}}const s="wp-block-create-block-meetings-table-block",i={dayOfWeekClassName:"day-of-week-filter",cityClassName:"city-filter",groupTypeClassName:"group-type-filter",startTimeClassName:"start-time-filter"},o=new class{filterEvents(e){const t=document.getElementsByClassName(e);0!==t.length&&[...t].forEach((t=>{const l=t.querySelector("table"),r=t.querySelector("tbody"),s=t.querySelectorAll("tbody tr"),o=t.querySelector(".wp-block-create-block-meetings-table-block__filters__wrapper"),{dayOfWeekClassName:a}=i,{cityClassName:c}=i,{groupTypeClassName:n}=i,{startTimeClassName:d}=i;let u=this.getSelectTagFilters(t,a,c,n,d);this.resetFilters(t,u,r),u.forEach((t=>{t.addEventListener("change",(t=>{var i,u;const h=t.target,p=h.className.split(" ")[0].trim(),b=`.${e}`,g=h.closest(b);let m=!1;if(p===d){m=!0,null!==(i=l.querySelector("tbody.copied-data"))&&void 0!==i&&i||this.setupFilterHandler(l,r,s);let t=this.getSelectTagFilters(g,a,c,n,d);return this.showHideFilter(e,g,a,c,n,d,r,o,h,m),void this.filterNotification(h,t)}{m=!1,null!==(u=l.querySelector("tbody.copied-data"))&&void 0!==u&&u||this.setupFilterHandler(l,r,s);let t=this.getSelectTagFilters(g,a,c,n,d);return this.showHideFilter(e,g,a,c,n,d,r,o,h,m),void this.filterNotification(h,t)}}))}))}))}setupFilterHandler(e,t,l){var r;t.classList.contains("hide")||t.classList.add("hide");const s=null!==(r=e.querySelector("tbody.copied-data"))&&void 0!==r?r:null;s&&s.remove();const i=document.createElement("tbody");i.classList.add("copied-data"),i.classList.contains("hide")&&i.classList.remove("hide"),this.isElemEmpty(i)&&(l.forEach((e=>{const t=e.cloneNode(!0);i.appendChild(t)})),e.appendChild(i)),i.querySelectorAll("tr").forEach(((e,t)=>{const l=t+1;e.setAttribute("data-original-order",l)}))}showHideFilter(e,t,l,r,s,i,o,a,c,n){const d=t.querySelector("tbody.copied-data"),u=d.querySelectorAll("tr");let h=this.getSelectTagFilters(t,l,r,s,i),{filtersArr:p}=this.filtersArr(h),{optionsTagValues:b}=this.filtersArr(h);if(n)return 1===p.length&&""===p[0]?void this.filterResetHandler(d,o):void this.sortTimeFilter(e,c,a);if(1!==p.length||""!==p[0]){u.forEach((e=>{let t=JSON.stringify(b),l=e.getAttribute("data-filter-day"),r=e.getAttribute("data-filter-city"),s=null;switch(!0){case-1!==t.indexOf("location~"):s=e.getAttribute("data-location-group-type");break;case-1!==t.indexOf("access~"):s=e.getAttribute("data-access-group-type");break;case-1!==t.indexOf("gender~"):s=e.getAttribute("data-gender-group-type");break;default:s=e.getAttribute("data-additional-group-type")}let i=[],o=[];[l,r,s].forEach(((e,t)=>{""!==b[t]&&(i.push(e),o.push(b[t]))})),JSON.stringify(i)===JSON.stringify(o)?e.classList.remove("hide"):e.classList.add("hide")}));const e=t.querySelector("tbody.copied-data");this.alternateRowColor(e)}else this.filterResetHandler(d,o)}sortTimeFilter(t,s){var i;const o=`.${t}`,a=s.closest(o),c=null!==(i=a.querySelector("tbody.copied-data"))&&void 0!==i?i:null;if(!c)return;const n=c.querySelectorAll("tr"),d=s.value,u=Array.from(n);if("asc~"===d){let e=u.sort(r((e=>e.getAttribute("data-start-time")),l()));this.emptyElem(c),c.append(...e)}else if("desc~"===d){let e=u.sort(r((e=>e.getAttribute("data-start-time")),l({desc:!0})));this.emptyElem(c),c.append(...e)}else{let t=u.sort(r((e=>Number(e.getAttribute("data-original-order"))),((t={desc:!1,nullable:!1})=>{const l=e(t);return(e,r)=>t.nullable?l((e||0)-(r||0)||0):l(e-r||0)})()));this.emptyElem(c),c.append(...t)}const h=a.querySelector("tbody.copied-data");this.alternateRowColor(h)}filtersArr(e){let t=[],l=[];e.forEach((e=>{let r=e.options[e.selectedIndex].value,s=e.options[e.selectedIndex].text;t.push(r),l.push(s)}));const r=[...new Set(t)],s=[...new Set(l)];return l=s.filter(Boolean),{filtersArr:r,optionsTagValues:t,optionsTagText:l}}filterResetHandler(e,t){e.remove(),t.classList.remove("hide")}alternateRowColor(e){e.querySelectorAll("tr:not(.hide)").forEach(((e,t)=>{e.classList.remove("bg-light-gray"),e.classList.remove("bg-white"),t%2!=0?e.classList.add("bg-white"):e.classList.add("bg-light-gray")}))}getSelectTagFilters(e,t,l,r,s){return[e.querySelector(`select.${t}`),e.querySelector(`select.${l}`),e.querySelector(`select.${r}`),e.querySelector(`select.${s}`)]}filterNotification(e,t){var l;const r=e.closest(`.${s}`),i=r.querySelectorAll("tbody.original-data tr"),o=r.querySelectorAll("tbody.copied-data tr:not(.hide)"),a=null!==(l=r.querySelector(".notification"))&&void 0!==l?l:null,{filtersArr:c}=this.filtersArr(t),{optionsTagValues:n}=this.filtersArr(t),{optionsTagText:d}=this.filtersArr(t),u=[];let h=null;switch(!0){case 1===c.length&&""===c[0]:return void(a&&(a.textContent=`Showing All ${i.length} Meeting(s)`));case 0===o.length:return h=this.selectedFilterArr(n,d,u),void(a&&(a.innerHTML=`Showing ${o.length} Meeting(s) when filter(s) selected:<br />${h}`));default:h=this.selectedFilterArr(n,d,u),a&&(a.innerHTML=`Showing ${o.length} Meeting(s) when filter(s) selected:<br />${h}`)}}resetFilters(e,t,l){e.querySelector(".wp-block-create-block-meetings-table-block_reset-btn").addEventListener("click",(r=>{var i,o;const a=r.target.closest(`.${s}`),c=e.querySelectorAll("tbody.original-data tr"),n=null!==(i=a.querySelector("table tbody.copied-data"))&&void 0!==i?i:null;if(a.querySelector(".wp-block-create-block-meetings-table-block__filters__wrapper"),!n)return;t.forEach((e=>{e.value=""}));const d=null!==(o=e.querySelector(".notification"))&&void 0!==o?o:null;d&&(d.textContent=`Showing All ${c.length} Meeting(s)`),n.remove(),l.classList.remove("hide")}))}isElemEmpty(e){return 0===e.childNodes.length}emptyElem(e){e.textContent=""}selectedFilterArr(e,t,l){return e.map(((e,r)=>{""!==e&&l.push(t[r])})),l.join(", ")}removeDupesFromArr(e){return[...new Set(e)]}onPrintEvents(e,t,l){e.forEach((e=>{e.addEventListener("click",(e=>{const r=document.querySelectorAll("*");this.hideAllElemsOnPrint(r);const s=e.target,i=s.closest("table");s.classList.remove("wp-block-create-block-meetings-table-block_show-print"),s.classList.add("wp-block-create-block-meetings-table-block_hide-print"),this.updateParentElemClasses(s,t,l);const o=this.getAllDescendants(i);o&&(o.forEach((e=>{e.classList&&(e.classList.remove("wp-block-create-block-meetings-table-block_hide-print"),e.classList.add("wp-block-create-block-meetings-table-block_show-print"))})),window.print())}))}))}hideAllElemsOnPrint(e){e.forEach((e=>{"HTML"!==e.nodeName.toUpperCase()&&(e.classList.remove("wp-block-create-block-meetings-table-block_show-print"),e.classList.add("wp-block-create-block-meetings-table-block_hide-print"))}))}updateParentElemClasses(e,t,l){let r=e.parentNode;r.classList.add(t),r.classList.remove(l);let s=r.nodeName.toUpperCase();for(;s&&"BODY"!==s&&s;)r=r.parentNode,r.classList.add(t),r.classList.remove(l),s=r?.nodeName.toUpperCase()}exitPrintEvents(e,t){window.matchMedia("print").addListener((function(l){l.matches||[...Array.from(document.getElementsByClassName(e)),...Array.from(document.getElementsByClassName(t))].forEach((l=>{l.classList.remove(e),l.classList.remove(t)}))}))}getAllDescendants(e){if(!e)return;let t=[];return function e(l){for(var r=0;r<l.childNodes.length;r++){let s=l.childNodes[r];e(s),t.push(s)}}(e),t}};o.filterEvents(`${s}`);const a=document.querySelectorAll(`.${s}`);o.onPrintEvents(a,"show-print","wp-block-create-block-meetings-table-block_hide-print"),o.exitPrintEvents("show-print","wp-block-create-block-meetings-table-block_hide-print")})();