!function(){"use strict";const e=e=>e.desc?e=>-1*e:e=>e,t=(e,t)=>(t.nullable&&(e=e||""),t.lowercase&&(e=e.toLowerCase()),e),l=(l={desc:!1,nullable:!1,lowercase:!1})=>{const r=e(l);return(e,s)=>r(t(e,l).localeCompare(t(s,l)))};function r(e,t){return"function"==typeof e?(l,r)=>{const s=e(l),i=e(r);return t(s,i)}:(l,r)=>{const s=l[e],i=r[e];return t(s,i)}}const s=new class{filterEvents(e,t=!0){const l=document.querySelectorAll(e);0!==l.length&&l.forEach(((l,r)=>{var s,i;const o=l.querySelector("table"),c=l.querySelector("tbody"),a=l.querySelectorAll("tbody tr"),n=l.querySelector(".wp-block-create-block-meetings-table-block__filters__wrapper"),d=null!==(s=n.querySelector(".editing-locked-msg"))&&void 0!==s?s:null,u=null!==(i=l.querySelector(".block-editor-inner-blocks"))&&void 0!==i?i:null,g="day-of-week-filter",h="city-filter",b="group-type-filter",p="start-time-filter";!t&&d&&d.remove();let m=this.getSelectTagFilters(l,g,h,b,p);this.resetFilters(l,m,c,u),document.body.addEventListener("change",(t=>{var r,s;const i=t.target.className;let d=!1,u=t.target;switch(i){case p:d=!0,null!==(r=o.querySelector("tbody.copied-data"))&&void 0!==r&&r||this.setupFilterHandler(o,c,a);let t=this.getSelectTagFilters(l,g,h,b,p);return this.showHideFilter(e,l,g,h,b,p,c,n,u,d),void this.filterNotification(l,t);case g:case h:case b:d=!1,null!==(s=o.querySelector("tbody.copied-data"))&&void 0!==s&&s||this.setupFilterHandler(o,c,a);let i=this.getSelectTagFilters(l,g,h,b,p);return this.showHideFilter(e,l,g,h,b,p,c,n,u,d),void this.filterNotification(l,i)}}))}))}setupFilterHandler(e,t,l){var r;t.classList.contains("hide")||t.classList.add("hide");const s=null!==(r=e.querySelector("tbody.copied-data"))&&void 0!==r?r:null;s&&s.remove();const i=document.createElement("tbody");i.classList.add("copied-data"),i.classList.contains("hide")&&i.classList.remove("hide"),this.isElemEmpty(i)&&(l.forEach((e=>{const t=e.cloneNode(!0);i.appendChild(t)})),e.appendChild(i)),i.querySelectorAll("tr").forEach(((e,t)=>{const l=t+1;e.setAttribute("data-original-order",l)}))}showHideFilter(e,t,l,r,s,i,o,c,a,n){const d=t.querySelector("tbody.copied-data"),u=d.querySelectorAll("tr");let g=this.getSelectTagFilters(t,l,r,s,i),{filtersArr:h}=this.filtersArr(g),{optionsTagValues:b}=this.filtersArr(g);if(n)return 1===h.length&&""===h[0]?(this.filterResetHandler(d,o),void this.toggleEditingLockedMsg(c,!1)):void this.sortTimeFilter(e,a,c);if(1===h.length&&""===h[0])return this.filterResetHandler(d,o),void this.toggleEditingLockedMsg(c,!1);{u.forEach((e=>{let t=JSON.stringify(b),l=e.getAttribute("data-filter-day"),r=e.getAttribute("data-filter-city"),s=null;switch(!0){case-1!==t.indexOf("location~"):s=e.getAttribute("data-location-group-type");break;case-1!==t.indexOf("access~"):s=e.getAttribute("data-access-group-type");break;case-1!==t.indexOf("gender~"):s=e.getAttribute("data-gender-group-type");break;default:s=e.getAttribute("data-additional-group-type")}let i=[],o=[];[l,r,s].forEach(((e,t)=>{""!==b[t]&&(i.push(e),o.push(b[t]))})),JSON.stringify(i)===JSON.stringify(o)?e.classList.remove("hide"):e.classList.add("hide")}));const e=t.querySelector("tbody.copied-data");this.alternateRowColor(e),this.toggleEditingLockedMsg(c,!0)}}sortTimeFilter(t,s,i){var o;const c=s.closest(t),a=null!==(o=c.querySelector("tbody.copied-data"))&&void 0!==o?o:null;if(!a)return;const n=a.querySelectorAll("tr"),d=s.value,u=Array.from(n);if("asc~"===d){let e=u.sort(r((e=>e.getAttribute("data-start-time")),l()));this.emptyElem(a),a.append(...e)}else if("desc~"===d){let e=u.sort(r((e=>e.getAttribute("data-start-time")),l({desc:!0})));this.emptyElem(a),a.append(...e)}else{let t=u.sort(r((e=>Number(e.getAttribute("data-original-order"))),((t={desc:!1,nullable:!1})=>{const l=e(t);return(e,r)=>t.nullable?l((e||0)-(r||0)||0):l(e-r||0)})()));this.emptyElem(a),a.append(...t)}const g=c.querySelector("tbody.copied-data");this.alternateRowColor(g),this.toggleEditingLockedMsg(i,!0)}filtersArr(e){let t=[],l=[];e.forEach((e=>{let r=e.options[e.selectedIndex].value,s=e.options[e.selectedIndex].text;t.push(r),l.push(s)}));const r=[...new Set(t)],s=[...new Set(l)];return l=s.filter(Boolean),{filtersArr:r,optionsTagValues:t,optionsTagText:l}}filterResetHandler(e,t){e.remove(),t.classList.remove("hide")}alternateRowColor(e){e.querySelectorAll("tr:not(.hide)").forEach(((e,t)=>{e.classList.remove("bg-light-gray"),e.classList.remove("bg-white"),t%2!=0?e.classList.add("bg-white"):e.classList.add("bg-light-gray")}))}toggleEditingLockedMsg(e,t){const l=e.querySelector(".editing-locked-msg");e&&l&&(t?l.classList.contains("hide")&&l.classList.remove("hide"):l.classList.add("hide"))}getSelectTagFilters(e,t,l,r,s){return[e.querySelector(`select.${t}`),e.querySelector(`select.${l}`),e.querySelector(`select.${r}`),e.querySelector(`select.${s}`)]}filterNotification(e,t){var l;const r=e.querySelectorAll("tbody.original-data tr"),s=e.querySelectorAll("tbody.copied-data tr:not(.hide)"),i=null!==(l=e.querySelector(".notification"))&&void 0!==l?l:null,{filtersArr:o}=this.filtersArr(t),{optionsTagValues:c}=this.filtersArr(t),{optionsTagText:a}=this.filtersArr(t),n=[];let d=null;switch(!0){case 1===o.length&&""===o[0]:return void(i&&(i.textContent=`Showing All ${r.length} Meeting(s)`));case 0===s.length:return d=this.selectedFilterArr(c,a,n),void(i&&(i.innerHTML=`Showing ${s.length} Meeting(s) when filter(s) selected:<br />${d}`));default:d=this.selectedFilterArr(c,a,n),i&&(i.innerHTML=`Showing ${s.length} Meetings when filter(s) selected:<br />${d}`)}}resetFilters(e,t,l,r){e.querySelector(".wp-block-create-block-meetings-table-block_reset-btn").addEventListener("click",(r=>{var s,i;const o=r.target.closest(".wp-block-create-block-meetings-table-block"),c=e.querySelectorAll("tbody.original-data tr"),a=null!==(s=o.querySelector("table tbody.copied-data"))&&void 0!==s?s:null,n=o.querySelector(".wp-block-create-block-meetings-table-block__filters__wrapper");if(!a)return;this.toggleEditingLockedMsg(n,!1),t.forEach((e=>{e.value=""}));const d=null!==(i=e.querySelector(".notification"))&&void 0!==i?i:null;d&&(d.textContent=`Showing All ${c.length} Meeting(s)`),a.remove(),l.classList.remove("hide")}))}isElemEmpty(e){return 0===e.childNodes.length}emptyElem(e){e.textContent=""}selectedFilterArr(e,t,l){return e.map(((e,r)=>{""!==e&&l.push(t[r])})),l.join(", ")}onPrintEvents(e,t,l){e.forEach((e=>{e.addEventListener("click",(e=>{const r=document.querySelectorAll("*");this.hideAllElemsOnPrint(r);const s=e.target,i=s.closest("table");s.classList.remove("wp-block-create-block-meetings-table-block_show-print"),s.classList.add("wp-block-create-block-meetings-table-block_hide-print"),this.updateParentElemClasses(s,t,l),this.getAllDescendants(i).forEach((e=>{e.classList&&(e.classList.remove("wp-block-create-block-meetings-table-block_hide-print"),e.classList.add("wp-block-create-block-meetings-table-block_show-print"))})),window.print()}))}))}hideAllElemsOnPrint(e){e.forEach((e=>{"HTML"!==e.nodeName.toUpperCase()&&(e.classList.remove("wp-block-create-block-meetings-table-block_show-print"),e.classList.add("wp-block-create-block-meetings-table-block_hide-print"))}))}updateParentElemClasses(e,t,l){let r=e.parentNode;r.classList.add(t),r.classList.remove(l);let s=r.nodeName.toUpperCase();for(;s&&"BODY"!==s&&s;)r=r.parentNode,r.classList.add(t),r.classList.remove(l),s=r?.nodeName.toUpperCase()}exitPrintEvents(e,t){window.matchMedia("print").addListener((function(l){l.matches||[...Array.from(document.getElementsByClassName(e)),...Array.from(document.getElementsByClassName(t))].forEach((l=>{l.classList.remove(e),l.classList.remove(t)}))}))}getAllDescendants(e){let t=[];return function e(l){for(var r=0;r<l.childNodes.length;r++){let s=l.childNodes[r];e(s),t.push(s)}}(e),t}};s.filterEvents(".wp-block-create-block-meetings-table-block",!1);const i=document.querySelectorAll(".wp-block-create-block-meetings-table-block button.print");s.onPrintEvents(i,"show-print","wp-block-create-block-meetings-table-block_hide-print"),s.exitPrintEvents("show-print","wp-block-create-block-meetings-table-block_hide-print")}();