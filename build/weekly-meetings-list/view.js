(()=>{"use strict";const e=e=>e.desc?e=>-1*e:e=>e,t=(e,t)=>(t.nullable&&(e=e||""),t.lowercase&&(e=e.toLowerCase()),e),s=(s={desc:!1,nullable:!1,lowercase:!1})=>{const l=e(s);return(e,r)=>l(t(e,s).localeCompare(t(r,s)))};function l(e,t){return"function"==typeof e?(s,l)=>{const r=e(s),i=e(l);return t(r,i)}:(s,l)=>{const r=s[e],i=l[e];return t(r,i)}}const r="wp-block-create-block-meetings-table-block",i={startTimeClassName:"start-time-filter"},a=new class{filterEvents(e){const t=document.getElementsByClassName(e);0!==t.length&&[...t].forEach((t=>{const s=t.getElementsByTagName("table"),l=t.getElementsByTagName("tbody"),a=t.getElementsByTagName("tbody")[0].getElementsByTagName("tr"),n=t.getElementsByClassName(`${e}__filters__wrapper`),{startTimeClassName:o}=i;let c=t.getElementsByTagName("select");t.getElementsByClassName("wp-block-create-block-meetings-table-block_reset-btn")[0].addEventListener("click",(e=>{const t=e.target,s=r;this.resetBtnEvents(t,s,c,l)})),[...c].forEach((t=>{t.addEventListener("change",(t=>{const r=t.target,i=r.className.split(" ")[0].trim(),c=`.${e}`,d=r.closest(c);this.filterEventsLoop(r,i,e,d,o,s,l,a,n)}))}))}))}filterEventsLoop(e,t,s,l,r,i,a,n,o){let c=!1;if(t===r){c=!0,0===i[0].getElementsByClassName("copied-data").length&&this.setupFilterHandler(i,a,n);let t=l.getElementsByTagName("select");return this.showHideFilter(s,l,a,o,e,c),void this.filterNotification(e,t)}{c=!1,0===i[0].getElementsByClassName("copied-data").length&&this.setupFilterHandler(i,a,n);let t=l.getElementsByTagName("select");return this.showHideFilter(s,l,a,o,e,c),void this.filterNotification(e,t)}}setupFilterHandler(e,t,s){var l;t[0].classList.contains("hide")||t[0].classList.add("hide");const r=null!==(l=e[0].getElementsByClassName("copied-data"))&&void 0!==l?l:null;r.length>0&&r.remove();const i=document.createElement("tbody");i.classList.add("copied-data"),i.classList.contains("hide")&&i.classList.remove("hide"),this.isElemEmpty(i)&&([...s].forEach(((e,t)=>{const s=t+1,l=e.cloneNode(!0);l.setAttribute("data-original-order",s),i.appendChild(l)})),e[0].appendChild(i))}showHideFilter(e,t,s,l,r,i){const a=t.getElementsByClassName("copied-data"),n=[...a[0].getElementsByTagName("tr")];let o=t.getElementsByTagName("select"),{filtersArr:c}=this.filtersArr(o),{optionsTagValues:d}=this.filtersArr(o);if(i)return 1===c.length&&""===c[0]?void this.filterResetHandler(a,s):void this.sortTimeFilter(e,r,l);if(1!==c.length||""!==c[0]){n.forEach((e=>{let t=JSON.stringify(d),s=e.getAttribute("data-filter-day"),l=e.getAttribute("data-filter-city"),r=null;switch(!0){case-1!==t.indexOf("location~"):r=e.getAttribute("data-location-group-type");break;case-1!==t.indexOf("access~"):r=e.getAttribute("data-access-group-type");break;case-1!==t.indexOf("gender~"):r=e.getAttribute("data-gender-group-type");break;default:r=e.getAttribute("data-additional-group-type")}let i=[],a=[];[s,l,r].forEach(((e,t)=>{""!==d[t]&&(i.push(e),a.push(d[t]))})),JSON.stringify(i)===JSON.stringify(a)?e.classList.remove("hide"):e.classList.add("hide")}));const e=t.querySelector("tbody.copied-data");this.alternateRowColor(e)}else this.filterResetHandler(a,s)}sortTimeFilter(t,r){var i;const a=`.${t}`,n=r.closest(a),o=null!==(i=n.querySelector("tbody.copied-data"))&&void 0!==i?i:null;if(!o)return;const c=o.querySelectorAll("tr"),d=r.value,m=Array.from(c);if("asc~"===d){let e=m.sort(l((e=>e.getAttribute("data-start-time")),s()));this.emptyElem(o),o.append(...e)}else if("desc~"===d){let e=m.sort(l((e=>e.getAttribute("data-start-time")),s({desc:!0})));this.emptyElem(o),o.append(...e)}else{let t=m.sort(l((e=>Number(e.getAttribute("data-original-order"))),((t={desc:!1,nullable:!1})=>{const s=e(t);return(e,l)=>t.nullable?s((e||0)-(l||0)||0):s(e-l||0)})()));this.emptyElem(o),o.append(...t)}const g=n.querySelector("tbody.copied-data");this.alternateRowColor(g)}filtersArr(e){let t=[],s=[];[...e].forEach((e=>{let l=e.options[e.selectedIndex].value,r=e.options[e.selectedIndex].text;t.push(l),s.push(r)}));const l=[...new Set(t)],r=[...new Set(s)];return s=r.filter(Boolean),{filtersArr:l,optionsTagValues:t,optionsTagText:s}}filterResetHandler(e,t){e[0].remove(),t[0].classList.remove("hide")}alternateRowColor(e){e.querySelectorAll("tr:not(.hide)").forEach(((e,t)=>{e.classList.remove("bg-light-gray"),e.classList.remove("bg-white"),t%2!=0?e.classList.add("bg-white"):e.classList.add("bg-light-gray")}))}filterNotification(e,t){var s;const l=e.closest(`.${r}`),i=l.querySelectorAll("tbody.original-data tr"),a=l.querySelectorAll("tbody.copied-data tr:not(.hide)"),n=null!==(s=l.querySelector(".notification"))&&void 0!==s?s:null,{filtersArr:o}=this.filtersArr(t),{optionsTagValues:c}=this.filtersArr(t),{optionsTagText:d}=this.filtersArr(t),m=[];let g=null;switch(!0){case 1===o.length&&""===o[0]:return void(n&&(n.textContent=`Showing All ${i.length} Meeting(s)`));case 0===a.length:return g=this.selectedFilterArr(c,d,m),void(n&&(n.innerHTML=`Showing ${a.length} Meeting(s) when filter(s) selected:<br />${g}`));default:g=this.selectedFilterArr(c,d,m),n&&(n.innerHTML=`Showing ${a.length} Meeting(s) when filter(s) selected:<br />${g}`)}}resetBtnEvents(e,t,s,l){const r=e.closest(`.${t}`),i=r.getElementsByClassName("original-data")[0].getElementsByTagName("tr"),a=r.getElementsByClassName("copied-data");if(0===a.length)return;[...s].forEach((e=>{e.value=""}));const n=r.getElementsByClassName("notification");n.length>0&&(n[0].textContent=`Showing All ${i.length} Meeting(s)`),a[0].remove(),l[0].classList.remove("hide")}isElemEmpty(e){return 0===e.childNodes.length}emptyElem(e){e.textContent=""}selectedFilterArr(e,t,s){return e.map(((e,l)=>{""!==e&&s.push(t[l])})),s.join(", ")}removeDupesFromArr(e){return[...new Set(e)]}onPrintEvents(e,t,s){e.forEach((e=>{if(!this.isChromeOrEdge()&&!this.isMobileOrTablet()){e.textContent=`${e.textContent} (disabled *)`;const t=document.createElement("div");return t.classList.add("print-btn-disabled-notice"),t.setAttribute("role","alert"),t.setAttribute("aria-live","polite"),t.innerHTML='* The meeting schedule print button does not work in your browser. Please use <a href="https://www.google.com/chrome/" target="_blank">Chrome</a> or <a href="https://www.microsoft.com/edge/download" target="_blank">Edge</a> browsers instead.',void e.insertAdjacentElement("afterend",t)}e.addEventListener("click",(e=>{const l=document.querySelectorAll("*");this.hideAllElemsOnPrint(l);const r=e.target,i=r.closest("table");r.classList.remove("wp-block-create-block-meetings-table-block_show-print"),r.classList.add("wp-block-create-block-meetings-table-block_hide-print"),this.updateParentElemClasses(r,t,s);const a=this.getAllDescendants(i);a&&(a.forEach((e=>{e.classList&&(e.classList.remove("wp-block-create-block-meetings-table-block_hide-print"),e.classList.add("wp-block-create-block-meetings-table-block_show-print"))})),window.print())}))}))}hideAllElemsOnPrint(e){e.forEach((e=>{"HTML"!==e.nodeName.toUpperCase()&&(e.classList.remove("wp-block-create-block-meetings-table-block_show-print"),e.classList.add("wp-block-create-block-meetings-table-block_hide-print"))}))}updateParentElemClasses(e,t,s){let l=e.parentNode;l.classList.add(t),l.classList.remove(s);let r=l.nodeName.toUpperCase();for(;r&&"BODY"!==r&&r;)l=l.parentNode,l.classList.add(t),l.classList.remove(s),r=l?.nodeName.toUpperCase()}exitPrintEvents(e,t){(this.isChromeOrEdge()||this.isMobileOrTablet())&&window.matchMedia("print").addListener((function(s){s.matches||[...Array.from(document.getElementsByClassName(e)),...Array.from(document.getElementsByClassName(t))].forEach((s=>{s.classList.remove(e),s.classList.remove(t)}))}))}getAllDescendants(e){if(!e)return;let t=[];return function e(s){for(var l=0;l<s.childNodes.length;l++){let r=s.childNodes[l];e(r),t.push(r)}}(e),t}isChromeOrEdge(){const e=navigator.userAgent.toLowerCase(),t=e.includes("chrome")&&!e.includes("edg"),s=e.includes("edg");return t||s}isMobileOrTablet(){const e=navigator.userAgent.toLowerCase(),t=e.includes("android"),s=/iphone|ipad|ipod/.test(e),l=/mobile/.test(e);return t||s||l}};a.filterEvents(`${r}`);const n=document.querySelectorAll(`.${r} button.print`);a.onPrintEvents(n,"show-print","wp-block-create-block-meetings-table-block_hide-print"),a.exitPrintEvents("show-print","wp-block-create-block-meetings-table-block_hide-print")})();