(()=>{"use strict";const e=e=>e.desc?e=>-1*e:e=>e,t=(e,t)=>(t.nullable&&(e=e||""),t.lowercase&&(e=e.toLowerCase()),e),s=(s={desc:!1,nullable:!1,lowercase:!1})=>{const l=e(s);return(e,r)=>l(t(e,s).localeCompare(t(r,s)))};function l(e,t){return"function"==typeof e?(s,l)=>{const r=e(s),a=e(l);return t(r,a)}:(s,l)=>{const r=s[e],a=l[e];return t(r,a)}}const r="wp-block-create-block-meetings-table-block",a={startTimeClassName:"start-time-filter"},i=new class{filterEvents(e){const t=document.getElementsByClassName(e);0!==t.length&&[...t].forEach((t=>{const s=t.getElementsByTagName("table"),l=t.getElementsByTagName("tbody"),i=t.getElementsByTagName("tbody")[0].getElementsByTagName("tr"),n=t.getElementsByClassName(`${e}__filters__wrapper`),{startTimeClassName:o}=a;let c=t.getElementsByTagName("select");t.getElementsByClassName("wp-block-create-block-meetings-table-block_reset-btn")[0].addEventListener("click",(e=>{const t=e.target,s=r;this.resetBtnEvents(t,s,c,l)})),[...c].forEach((t=>{t.addEventListener("change",(t=>{const r=t.target,a=r.className.split(" ")[0].trim(),c=`.${e}`,d=r.closest(c);this.filterEventsLoop(r,a,e,d,o,s,l,i,n)}))}))}))}filterEventsLoop(e,t,s,l,r,a,i,n,o){let c=!1;if(t===r){c=!0,0===a[0].getElementsByClassName("copied-data").length&&this.setupFilterHandler(a,i,n);let t=l.getElementsByTagName("select");return this.showHideFilter(s,l,i,o,e,c),void this.filterNotification(e,t)}{c=!1,0===a[0].getElementsByClassName("copied-data").length&&this.setupFilterHandler(a,i,n);let t=l.getElementsByTagName("select");return this.showHideFilter(s,l,i,o,e,c),void this.filterNotification(e,t)}}setupFilterHandler(e,t,s){var l;t[0].classList.contains("hide")||t[0].classList.add("hide");const r=null!==(l=e[0].getElementsByClassName("copied-data"))&&void 0!==l?l:null;r.length>0&&r.remove();const a=document.createElement("tbody");a.classList.add("copied-data"),a.classList.contains("hide")&&a.classList.remove("hide"),this.isElemEmpty(a)&&([...s].forEach(((e,t)=>{const s=t+1,l=e.cloneNode(!0);l.setAttribute("data-original-order",s),a.appendChild(l)})),e[0].appendChild(a))}showHideFilter(e,t,s,l,r,a){const i=t.getElementsByClassName("copied-data"),n=[...i[0].getElementsByTagName("tr")];let o=t.getElementsByTagName("select"),{filtersArr:c}=this.filtersArr(o),{optionsTagValues:d}=this.filtersArr(o);if(a)return 1===c.length&&""===c[0]?void this.filterResetHandler(i,s):void this.sortTimeFilter(e,r,l);if(1!==c.length||""!==c[0]){n.forEach((e=>{let t=JSON.stringify(d),s=e.getAttribute("data-filter-day"),l=e.getAttribute("data-filter-city"),r=null;switch(!0){case-1!==t.indexOf("location~"):r=e.getAttribute("data-location-group-type");break;case-1!==t.indexOf("access~"):r=e.getAttribute("data-access-group-type");break;case-1!==t.indexOf("gender~"):r=e.getAttribute("data-gender-group-type");break;default:r=e.getAttribute("data-additional-group-type")}let a=[],i=[];[s,l,r].forEach(((e,t)=>{""!==d[t]&&(a.push(e),i.push(d[t]))})),JSON.stringify(a)===JSON.stringify(i)?e.classList.remove("hide"):e.classList.add("hide")}));const e=t.querySelector("tbody.copied-data");this.alternateRowColor(e)}else this.filterResetHandler(i,s)}sortTimeFilter(t,r){var a;const i=`.${t}`,n=r.closest(i),o=null!==(a=n.querySelector("tbody.copied-data"))&&void 0!==a?a:null;if(!o)return;const c=o.querySelectorAll("tr"),d=r.value,m=Array.from(c);if("asc~"===d){let e=m.sort(l((e=>e.getAttribute("data-start-time")),s()));this.emptyElem(o),o.append(...e)}else if("desc~"===d){let e=m.sort(l((e=>e.getAttribute("data-start-time")),s({desc:!0})));this.emptyElem(o),o.append(...e)}else{let t=m.sort(l((e=>Number(e.getAttribute("data-original-order"))),((t={desc:!1,nullable:!1})=>{const s=e(t);return(e,l)=>t.nullable?s((e||0)-(l||0)||0):s(e-l||0)})()));this.emptyElem(o),o.append(...t)}const g=n.querySelector("tbody.copied-data");this.alternateRowColor(g)}filtersArr(e){let t=[],s=[];[...e].forEach((e=>{let l=e.options[e.selectedIndex].value,r=e.options[e.selectedIndex].text;t.push(l),s.push(r)}));const l=[...new Set(t)],r=[...new Set(s)];return s=r.filter(Boolean),{filtersArr:l,optionsTagValues:t,optionsTagText:s}}filterResetHandler(e,t){e[0].remove(),t[0].classList.remove("hide")}alternateRowColor(e){e.querySelectorAll("tr:not(.hide)").forEach(((e,t)=>{e.classList.remove("bg-light-gray"),e.classList.remove("bg-white"),t%2!=0?e.classList.add("bg-white"):e.classList.add("bg-light-gray")}))}filterNotification(e,t){var s;const l=e.closest(`.${r}`),a=l.querySelectorAll("tbody.original-data tr"),i=l.querySelectorAll("tbody.copied-data tr:not(.hide)"),n=null!==(s=l.querySelector(".notification"))&&void 0!==s?s:null,{filtersArr:o}=this.filtersArr(t),{optionsTagValues:c}=this.filtersArr(t),{optionsTagText:d}=this.filtersArr(t),m=[];let g=null;switch(!0){case 1===o.length&&""===o[0]:return void(n&&(n.textContent=`Showing All ${a.length} Meeting(s)`));case 0===i.length:return g=this.selectedFilterArr(c,d,m),void(n&&(n.innerHTML=`Showing ${i.length} Meeting(s) when filter(s) selected:<br />${g}`));default:g=this.selectedFilterArr(c,d,m),n&&(n.innerHTML=`Showing ${i.length} Meeting(s) when filter(s) selected:<br />${g}`)}}resetBtnEvents(e,t,s,l){const r=e.closest(`.${t}`),a=r.getElementsByClassName("original-data")[0].getElementsByTagName("tr"),i=r.getElementsByClassName("copied-data");if(0===i.length)return;[...s].forEach((e=>{e.value=""}));const n=r.getElementsByClassName("notification");n.length>0&&(n[0].textContent=`Showing All ${a.length} Meeting(s)`),i[0].remove(),l[0].classList.remove("hide")}isElemEmpty(e){return 0===e.childNodes.length}emptyElem(e){e.textContent=""}selectedFilterArr(e,t,s){return e.map(((e,l)=>{""!==e&&s.push(t[l])})),s.join(", ")}removeDupesFromArr(e){return[...new Set(e)]}onPrintEvents(e,t,s){e.forEach((e=>{e.addEventListener("click",(e=>{const l=document.querySelectorAll("*");this.hideAllElemsOnPrint(l);const r=e.target,a=r.closest("table");r.classList.remove("wp-block-create-block-meetings-table-block_show-print"),r.classList.add("wp-block-create-block-meetings-table-block_hide-print"),this.updateParentElemClasses(r,t,s);const i=this.getAllDescendants(a);i&&(i.forEach((e=>{e.classList&&(e.classList.remove("wp-block-create-block-meetings-table-block_hide-print"),e.classList.add("wp-block-create-block-meetings-table-block_show-print"))})),window.print())}))}))}hideAllElemsOnPrint(e){e.forEach((e=>{"HTML"!==e.nodeName.toUpperCase()&&(e.classList.remove("wp-block-create-block-meetings-table-block_show-print"),e.classList.add("wp-block-create-block-meetings-table-block_hide-print"))}))}updateParentElemClasses(e,t,s){let l=e.parentNode;l.classList.add(t),l.classList.remove(s);let r=l.nodeName.toUpperCase();for(;r&&"BODY"!==r&&r;)l=l.parentNode,l.classList.add(t),l.classList.remove(s),r=l?.nodeName.toUpperCase()}exitPrintEvents(e,t){window.matchMedia("print").addListener((function(s){s.matches||[...Array.from(document.getElementsByClassName(e)),...Array.from(document.getElementsByClassName(t))].forEach((s=>{s.classList.remove(e),s.classList.remove(t)}))}))}getAllDescendants(e){if(!e)return;let t=[];return function e(s){for(var l=0;l<s.childNodes.length;l++){let r=s.childNodes[l];e(r),t.push(r)}}(e),t}};i.filterEvents(`${r}`);const n=document.querySelectorAll(`.${r} button.print`);i.onPrintEvents(n,"show-print","wp-block-create-block-meetings-table-block_hide-print"),i.exitPrintEvents("show-print","wp-block-create-block-meetings-table-block_hide-print")})();